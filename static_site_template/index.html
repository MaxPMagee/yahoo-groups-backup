<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <!-- force edge-level compatibility for IE -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Yahoo! Group Backup</title>

  <!-- css -->
  <link href="./css/bootstrap.min.css" rel="stylesheet">
  <link href="./css/dataTables.bootstrap.min.css" rel="stylesheet">

  <style type="text/css">
    body {
      /* padding for nav */
      padding-top: 50px;
      /* min width for small devices */
      min-width: 480px;
    }

    html {
      /* always show scrollbar for consistency */
      overflow-y: scroll;
    }
  </style>

</head>

<!-- padding to make room for nav -->
<body>
  <!-- ========================================== -->
  <!-- module templates (must be included inline) -->
  <!-- ========================================== -->

  <script type="text/ng-template" id="./modules/nav.html">
    <div class="navbar navbar-inverse navbar-fixed-top" ng-controller="NavCtrl">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" ng-click="collapsed = !collapsed;">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="./index.html">{{ config.groupName }}</a>
      </div>
      <div class="collapse navbar-collapse" uib-collapse="collapsed">
        <ul class="nav navbar-nav">
          <li ui-sref-active="active" ng-repeat="nav in navs">
            <!--<a href="{{ nav.url }}">{{ nav.text }}</a>-->
            <a ui-sref="{{ nav.segment }}" ng-click="$parent.collapsed = true;">{{ nav.text }}</a>
          </li>
        </ul>
      </div>
    </div>
  </script>

  <script type="text/ng-template" id="./modules/files.html">
    <br>
    <div class="text-center">
      <a href="./data/files" target="_blank" class="lead">Click to view the group files (opens in a new tab).</a>
    </div>
  </script>

  <script type="text/ng-template" id="./modules/about.html">
    <div class="text-center">
      <br>
      <p class="lead">This is an automatically-generated backup of the "{{ config.groupName }}" Yahoo! Group.</p>
      <p class="lead">
        This backup doesn't contain any messages posted after {{ config.lastMessageTime*1000 | date:dateFormat }}.
        To see the latest messages, check out the live group
        <a href="https://groups.yahoo.com/neo/groups/{{ config.groupName }}/info" target="_blank">here</a>
        (opens in a new tab).
      </p>
    </div>
  </script>

  <script type="text/ng-template" id="./modules/message.html">
    <hr>
    <div class="row" style="font-size: 125%;">
      <div class="col-xs-4 text-left">
        <a href="{{ message.prevUrl }}" ng-show="message.prev != 0">
          &#x25c0;&nbsp;<span class="text-danger" ng-show="message.prevMissing">({{ message.prevMissing }} missing)</span>&nbsp;Earlier
        </a>
        <br>
      </div>
      <div class="col-xs-4 text-center">
        <a ui-sref="index">Back to Index</a><br>
        #{{ message.id }}
      </div>
      <div class="col-xs-4 text-right">
        <a href="{{ message.nextUrl }}" ng-show="message.next != 0">
          Later&nbsp;<span class="text-danger" ng-show="message.nextMissing">({{ message.nextMissing }} missing)</span>&nbsp;&#x25b6;
        </a>
        <br>
      </div>
    </div>
    <hr>
    <div class="row" style="font-size: 125%;" ng-repeat="header in headers">
      <div class="col-xs-4 col-sm-2"><b>{{ header.name }}:</b></div>
      <div class="col-xs-8 col-sm-10" ng-bind-html="header.value"></div>
    </div>
    <hr>
    <div class="row">
      <div class="col-xs-12">
        <div ng-if="loading" class="text-center">
          <img src="./img/loader.gif">
          </div>
        <div ng-if="!loading" ng-bind-html="message.messageBody"></div>
      </div>
    </div>
    <hr>
    <div class="row" style="font-size: 125%;">
      <div class="col-xs-4 text-left">
        <br>
        <a href="{{ message.prevUrl }}" ng-show="message.prev != 0">
          &#x25c0;&nbsp;<span class="text-danger" ng-show="message.prevMissing">({{ message.prevMissing }} missing)</span>&nbsp;Earlier
        </a>
      </div>
      <div class="col-xs-4 text-center">
        #{{ message.id }}<br>
        <a ui-sref="index">Back to Index</a>
      </div>
      <div class="col-xs-4 text-right">
        <br>
        <a href="{{ message.nextUrl }}" ng-show="message.next != 0">
          Later&nbsp;<span class="text-danger" ng-show="message.nextMissing">({{ message.nextMissing }} missing)</span>&nbsp;&#x25b6;
        </a>
      </div>
    </div>
    <hr>
  </script>


  <!-- ================================= -->
  <!-- ========== actual site ========== -->
  <!-- ================================= -->

  <!-- all content in one initially-hidden container -->
  <div id="script-container" class="container" style="display: none;">

  <!-- first view - show until config loaded -->
  <div ng-show="!configLoaded" class="text-center">
    <!-- show blank nav so page load looks nicer-->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="./index.html">&nbsp;</a>
      </div>
      <div class="collapse navbar-collapse" uib-collapse="true">
        </ul>
      </div>
    </div>
    <!-- pad the same as when index page is loaded -->
    <div class="text-center">
      <h1>&nbsp;</h1>
    </div>
    <br>
    <img src="./img/loader.gif">
  </div>

  <!-- second view - only show when finished loading -->
  <div ng-show="configLoaded">
  <div ng-include="'./modules/nav.html'"></div>

  <div class="text-center">
    <h1 ng-if="config.groupName">{{ config.groupName }} Yahoo! Group Backup</h1>
    <h1 ng-if="!config.groupName">Yahoo! Group Backup</h1>
  </div>

  <div ng-controller="IndexCtrl" ng-show="showMessageIndex">
    <div ng-show="!tableInitialized">
      <div class="text-center">
      <br>
      <img src="./img/loader.gif">
      </div>
    </div>
    <div ng-show="tableInitialized">
    <table id="messageIndexTable" class="table table-hover table-bordered" cellspacing="0" width="100%">
      <thead>
      <tr class="row">
        <th class="col-xs-4  col-sm-4 col-md-5 col-lg-6">Subject</th>
        <th class="col-xs-4  col-sm-3 col-md-3 col-lg-3">Author</th>
        <th class="col-xs-4  col-sm-3 col-md-3 col-lg-2">Posted<span id="tz"></span></th>
        <th class="hidden-xs col-sm-2 col-md-1 col-lg-1">#</th>
      </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    </div>
  </div>
  <section ui-view></section>
  </div>

  </div>

  <!-- noscript message, initially visible -->
  <div id="noscript-container">
    <div class="text-center">
      <p class="lead">You must enable JavaScript to use this static website.</p>
    </div>
  </div>

  <!-- ================================= -->
  <!-- ========== js includes ========== -->
  <!-- ================================= -->

  <!-- libraries -->
  <script type="text/javascript" src="./js/jquery-1.12.3.min.js"></script>
  <script type="text/javascript" src="./js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="./js/dataTables.bootstrap.min.js"></script>
  <script type="text/javascript" src="./js/date.format.js"></script>
  <script type="text/javascript" src="./js/lokijs.min.js"></script>

  <script type="text/javascript" src="./js/angular.min.js"></script>
  <script type="text/javascript" src="./js/angular-ui-router.min.js"></script>
  <script type="text/javascript" src="./js/angular-sanitize.min.js"></script>

  <script type="text/javascript" src="./js/ui-bootstrap-custom-1.3.3.min.js"></script>
  <script type="text/javascript" src="./js/ui-bootstrap-custom-tpls-1.3.3.min.js"></script>

  <!-- modules -->
  <script type="text/javascript" src="./modules/app.js"></script>
  <script type="text/javascript" src="./modules/local-jsonp.js"></script>
  <script type="text/javascript" src="./modules/nav.js"></script>
  <script type="text/javascript" src="./modules/index.js"></script>
  <script type="text/javascript" src="./modules/message.js"></script>


  <!-- ================================= -->
  <!-- ========= bootstrap app ========= -->
  <!-- ================================= -->
  <script type="text/javascript">
    // show javascript-only content
    $("#noscript-container").css({"display": "none"});
    $("#script-container").css({"display": ""});

    $(document).ready(function() {
      angular.bootstrap($("body"), ['staticyahoo.app']);
    });
  </script>
</body>
</html>
